{{define "nav.html"}}
<div x-data="navMenu()">
    <nav class="nav">
        <div class="nav-inner">
            <a href="/dashboard" class="nav-brand">VIRE</a>

            <ul class="nav-links">
                <li><a href="/dashboard" {{if eq .Page "dashboard"}}class="active"{{end}}>Dashboard</a></li>
                <li><a href="/strategy" {{if eq .Page "strategy"}}class="active"{{end}}>Strategy</a></li>
                <li><a href="/capital" {{if eq .Page "capital"}}class="active"{{end}}>Capital</a></li>
                <li><a href="/mcp-info" {{if eq .Page "mcp"}}class="active"{{end}}>MCP</a></li>
                <li><a href="/docs" {{if eq .Page "docs"}}class="active"{{end}}>Docs</a></li>
                {{if eq .UserRole "admin"}}<li><a href="/admin/users" {{if eq .Page "users"}}class="active"{{end}}>Users</a></li>{{end}}
            </ul>

            <div class="nav-hamburger-wrap" @click.outside="closeDropdown()">
                <div x-data="statusIndicators()" class="status-indicators">
                    <span class="status-dot" :class="'status-' + portal" title="Portal">P</span>
                    <span class="status-dot" :class="'status-' + server" title="Server">S</span>
                </div>
                <button @click="toggle()" class="nav-hamburger">
                    <span class="nav-hamburger-icon"></span>
                </button>
                <div x-show="dropdownOpen" x-cloak class="nav-dropdown">
                    <a href="/profile">Profile</a>
                    {{if eq .UserRole "admin"}}<a href="/admin/users">Users</a>{{end}}
                    <a href="/docs">Docs</a>
                    <form method="POST" action="/api/auth/logout">
                        <button type="submit" class="nav-dropdown-logout">Logout</button>
                    </form>
                </div>
            </div>
        </div>
    </nav>

    <template x-if="mobileOpen">
        <div>
            <div class="mobile-overlay" @click="closeMobile()"></div>
            <div class="mobile-menu">
                <button @click="closeMobile()" class="mobile-menu-close">&#10005;</button>
                <a href="/dashboard">Dashboard</a>
                <a href="/strategy">Strategy</a>
                <a href="/capital">Capital</a>
                <a href="/mcp-info">MCP</a>
                {{if eq .UserRole "admin"}}<a href="/admin/users">Users</a>{{end}}
                <a href="/docs">Docs</a>
                <a href="/profile">Profile</a>
                <form method="POST" action="/api/auth/logout">
                    <button type="submit" style="display:block;width:100%;padding:0.6rem 0;font-weight:700;font-size:0.8rem;letter-spacing:0.1em;text-transform:uppercase;text-decoration:none;color:#000;border:none;border-bottom:1px solid #888;background:none;cursor:pointer;text-align:left;font-family:'IBM Plex Mono',ui-monospace,monospace;">Logout</button>
                </form>
            </div>
        </div>
    </template>
</div>
{{end}}
