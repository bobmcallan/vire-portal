{{define "nav.html"}}
<div x-data="mobileMenu()">
    <nav class="nav">
        <div class="nav-inner">
            <a href="/" class="nav-brand">VIRE</a>
            <span class="nav-title">{{.PageTitle}}</span>

            <ul class="nav-links">
                <li><a href="/dashboard" {{if eq .Page "dashboard"}}class="active"{{end}}>Dashboard</a></li>
                <li>
                    <div x-data="dropdown()" class="dropdown">
                        <button @click="toggle()" class="dropdown-trigger">
                            Menu <span class="dropdown-arrow" :class="open && 'open'">&#9660;</span>
                        </button>
                        <div x-show="open" @click.outside="close()" x-transition.opacity class="dropdown-menu">
                            <a href="/settings">Settings</a>
                            <form method="POST" action="/api/auth/logout">
                                <button type="submit">Logout</button>
                            </form>
                        </div>
                    </div>
                </li>
            </ul>

            <button @click="open()" class="nav-hamburger">
                <span class="nav-hamburger-icon"></span>
            </button>
        </div>
    </nav>

    <template x-if="visible">
        <div>
            <div class="mobile-overlay" @click="close()"></div>
            <div class="mobile-menu">
                <button @click="close()" class="mobile-menu-close">&#10005;</button>
                <a href="/dashboard">Dashboard</a>
                <a href="/settings">Settings</a>
                <form method="POST" action="/api/auth/logout">
                    <button type="submit" style="display:block;width:100%;padding:0.6rem 0;font-weight:700;font-size:0.8rem;letter-spacing:0.1em;text-transform:uppercase;text-decoration:none;color:#000;border:none;border-bottom:1px solid #888;background:none;cursor:pointer;text-align:left;font-family:'IBM Plex Mono',ui-monospace,monospace;">Logout</button>
                </form>
            </div>
        </div>
    </template>
</div>
{{end}}
