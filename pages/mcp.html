<!DOCTYPE html>
<html lang="en">

<head>
    {{template "head.html" .}}
    <title>VIRE MCP</title>
</head>

<body>

    {{if .LoggedIn}}{{template "nav.html" .}}{{end}}

    <main class="page">
        <div class="page-body">

            <section class="panel-headed">
                <div class="panel-header">MCP CONNECTION</div>
                <div class="panel-content">
                    <p>Endpoint: <code>{{.MCPEndpoint}}</code></p>
                    <p>Add to your Claude Code config:</p>
                    <pre><code>{
  "mcpServers": {
    "vire": {
      "type": "streamable-http",
      "url": "{{.MCPEndpoint}}"
    }
  }
}</code></pre>
                    {{if .DevMCPEndpoint}}
                    <div style="margin-top: 1rem; border-left: 3px solid #f59e0b; padding-left: 1rem;">
                        <p><strong>DEV MODE:</strong> Authenticated endpoint (Claude Desktop):</p>
                        <p><code style="word-break: break-all;">{{.DevMCPEndpoint}}</code></p>
                        <p class="hint">Use this URL in Claude Desktop config. It authenticates as your user.</p>
                    </div>
                    {{end}}
                </div>
            </section>

            <section class="panel-headed">
                <div class="panel-header">TOOLS [{{.ToolStatus}}]</div>
                <div class="panel-content">
                    {{if .Tools}}
                    <div class="table-wrap">
                        <table class="tool-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Description</th>
                                    <th>Method</th>
                                    <th>Path</th>
                                </tr>
                            </thead>
                            <tbody>
                                {{range .Tools}}
                                <tr>
                                    <td class="tool-name">{{.Name}}</td>
                                    <td class="tool-desc">{{.Description}}</td>
                                    <td class="tool-method">{{.Method}}</td>
                                    <td class="tool-path">{{.Path}}</td>
                                </tr>
                                {{end}}
                            </tbody>
                        </table>
                    </div>
                    {{else}}
                    <p class="no-tools">NO TOOLS available. Ensure vire-server is running.</p>
                    {{end}}
                </div>
            </section>

        </div>
    </main>

    {{template "footer.html" .}}

</body>

</html>
